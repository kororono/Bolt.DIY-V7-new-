<!doctype html>
<html lang="en">

<head>
    <meta name="theme-color" content="#0a0a0a">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nairoreel Productions â€” Visual Storytelling Studio</title>
    <meta name="description" content="We are Nairoreel Productions â€” a creative studio crafting captivating visuals through 3D, cinematography, and motion storytelling.">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/homepage-featured.css">
    
    <!--
    =================================
    PRELOADER STYLES
    =================================
    These styles are only for the preloader screen and the transition.
    They are isolated from the main site styles.
    -->
    <style id="preloader-styles">
        /* Base reset for preloader */
        .preloader-scope-reset * {
            border: 0;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        :root {
            --preloader-hue: 223;
            --preloader-hue2: 345;  /* Red for 'on' */
            --preloader-bg: #0a0a0a;
            --preloader-fg: hsl(var(--preloader-hue),10%,90%);
            --preloader-switch-bg: hsl(var(--preloader-hue), 5%, 15%); /* Darker switch body */
            --preloader-switch-bg-light: hsl(var(--preloader-hue), 5%, 25%);
            --preloader-switch-bg-dark: hsl(var(--preloader-hue), 5%, 10%);
            --preloader-trans-dur: 0.3s;
            --preloader-trans-timing: cubic-bezier(0.83,0,0.17,1);
        }
        
        /* Apply preloader font only to the preloader itself */
        .preloader-screen,
        .preloader-screen input {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.5;
        }
        
        /* Preloader Screen */
        .preloader-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Center content vertically */
            background: var(--preloader-bg);
            color: var(--preloader-fg);
            z-index: 1000;
            transition: opacity 1s ease-out, transform 1s ease-out;
            padding: 2rem;
            /* Apply reset scope */
            border: 0;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        .preloader-screen.hidden {
            opacity: 0;
            transform: scale(1.1);
            pointer-events: none;
        }

        /* Preloader Header (Logo) */
        .preloader-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem; /* Space between header and switch */
            opacity: 0;
            animation: fadeIn 1s ease-out 0.5s forwards;
            width: 100%; /* Ensure it takes full width for centering */
        }

        /* NEW STYLE FOR THE IMAGE LOGO */
        .preloader-logo-img {
            width: auto; /* Let height control */
            height: 150px; /* You can adjust this height */
            max-width: 200px; /* Prevent it from being too wide */
            object-fit: contain;
        }

        /* Power Text - ENSURED ANIMATION PROPERTIES ARE CORRECT */
        .power-text {
            font-size: 0.9rem;
            letter-spacing: 0.2em;
            color: #666;
            text-transform: uppercase;
            opacity: 0;
        }

        @keyframes preloaderFadeIn {
            to { opacity: 1; }
        }

        @keyframes preloaderFadeInPulse {
            0% { opacity: 0; }
            50% { opacity: 0.5; }
            100% { opacity: 0.3; }
        }
        
        /* Switch Styles */
        .switch,
        .switch__input {
            -webkit-tap-highlight-color: transparent;
        }
        
        .switch {
            /* Changed to darker color */
            background-color: var(--preloader-switch-bg);
            border-radius: 0.375em;
            box-shadow:
                0 4.375em 2em var(--preloader-switch-bg-dark) inset,
                0 0.125em 0 var(--preloader-switch-bg-light) inset,
                0 0 0.375em hsla(var(--preloader-hue),10%,5%,0.5);
            margin: 0; /* Removed margin: auto */
            position: relative;
            transition:
                background-color var(--preloader-trans-dur) var(--preloader-trans-timing),
                box-shadow var(--preloader-trans-dur) var(--preloader-trans-timing);
            width: 3.75em;
            height: 8.75em;
            font-size: calc(16px + (24 - 16) * (100vw - 320px) / (2560 - 320));
        }
        
        .switch__input,
        .switch__lever,
        .switch__lever-half-top,
        .switch__lever-half-bottom,
        .switch__lever-shadow,
        .switch__lever-shadow:before,
        .switch__lever-shadow:after {
            display: block;
        }
        
        .switch__input,
        .switch__label,
        .switch__lever-half-top,
        .switch__lever-half-bottom,
        .switch__lever-shadow,
        .switch__lever-shadow:before,
        .switch__lever-shadow:after {
            position: absolute;
        }
        
        .switch__input {
            cursor: pointer;
            width: 100%;
            height: 100%;
            -webkit-appearance: none;
            appearance: none;
            margin: 0;
        }
        
        .switch__label {
            overflow: hidden;
            width: 1px;
            height: 1px;
        }
        
        .switch__lever,
        .switch__lever-shadow {
            pointer-events: none;
        }
        
        .switch__lever {
            /* Adjusted lever color */
            background-color: var(--preloader-switch-bg);
            border-radius: 0.25em;
            box-shadow:
                0 0 0.25em var(--preloader-switch-bg-dark) inset,
                0.75em 0 0.5em var(--preloader-switch-bg-light) inset;
            margin: 0.375em;
            position: relative;
            transition:
                background-color var(--preloader-trans-dur) var(--preloader-trans-timing),
                box-shadow var(--preloader-trans-dur) var(--preloader-trans-timing);
            width: calc(100% - 0.75em);
            height: calc(100% - 0.75em);
        }
        
        .switch__lever:before {
            background-image: linear-gradient(hsla(var(--preloader-hue),10%,5%,0),hsla(var(--preloader-hue),10%,5%,0.2));
            border-radius: inherit;
            content: "";
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .switch__lever-half-top,
        .switch__lever-half-bottom {
            display: flex;
            justify-content: center;
            left: 0.125em;
            padding: 0.5em;
            width: calc(100% - 0.25em);
            height: calc(50% - 0.125em);
            transition:
                background-color var(--preloader-trans-dur) var(--preloader-trans-timing),
                transform var(--preloader-trans-dur) var(--preloader-trans-timing);
        }
        
        .switch__lever-half-top {
            background-color: var(--preloader-switch-bg-light); /* Adjusted */
            border-radius: 0.25em 0.25em 0 0;
            bottom: 50%;
            transform-origin: 50% 100%;
        }
        
        .switch__lever-half-top:before,
        .switch__lever-half-bottom:before {
            content: "";
            display: block;
            transition:
                background-color var(--preloader-trans-dur) var(--preloader-trans-timing),
                box-shadow var(--preloader-trans-dur) var(--preloader-trans-timing);
        }
        
        .switch__lever-half-top:before {
            border-radius: 50%;
            box-shadow:
                0 0 0 0.125em var(--preloader-switch-bg) inset,     /* Adjusted */
                0 0.25em 0 var(--preloader-switch-bg-light) inset, /* Adjusted */
                0 0.125em 0 var(--preloader-switch-bg-light);      /* Adjusted */
            width: 1em;
            height: 1em;
        }
        
        .switch__lever-half-bottom {
            background-color: hsl(var(--preloader-hue), 5%, 28%); /* Adjusted */
            border-radius: 0 0 0.25em 0.25em;
            align-items: flex-end;
            top: 50%;
            transform: rotateX(-35deg);
            transform-origin: 50% 0;
        }
        
        .switch__lever-half-bottom:before {
            background-color: hsl(var(--preloader-hue2),10%,25%);
            box-shadow:
                0 0.125em 0 hsl(var(--preloader-hue2),10%,20%) inset,
                0 -0.0625em 0 var(--preloader-switch-bg-light) inset, /* Adjusted */
                0 0 0.5em hsla(var(--preloader-hue2),90%,45%,0);
            width: 0.25em;
            height: 1.125em;
        }
        
        .switch__lever-shadow {
            border-radius: 0.25em;
            overflow: hidden;
            top: 0.5em;
            right: 0;
            width: 5em;
            height: calc(100% - 0.25em);
        }
        
        .switch__lever-shadow:before,
        .switch__lever-shadow:after {
            background-color: hsla(var(--preloader-hue),10%,5%,0.25); /* Adjusted */
            content: "";
            left: 1.625em;
            width: 3em;
            height: 50%;
            transition:
                background-color var(--preloader-trans-dur) var(--preloader-trans-timing),
                transform var(--preloader-trans-dur) var(--preloader-trans-timing);
        }
        
        .switch__lever-shadow:before {
            border-radius: 1.5em 0 0 0 / 1em 0 0 0;
            transform-origin: 0 100%;
        }
        
        .switch__lever-shadow:after {
            border-radius: 0.25em;
            bottom: 0;
            transform: skewX(-10deg);
            transform-origin: 0 0;
        }
        
        /* `:checked` state - LED turns RED */
        .switch__input:checked ~ .switch__lever .switch__lever-half-top {
            background-color: var(--preloader-switch-bg); /* Adjusted */
            transform: rotateX(35deg);
        }
        
        .switch__input:checked ~ .switch__lever .switch__lever-half-top:before {
            box-shadow:
                0 0 0 0.125em var(--preloader-switch-bg-dark) inset,  /* Adjusted */
                0 0.25em 0 var(--preloader-switch-bg) inset,      /* Adjusted */
                0 0.125em 0 var(--preloader-switch-bg);           /* Adjusted */
        }
        
        .switch__input:checked ~ .switch__lever .switch__lever-half-bottom {
            background-color: var(--preloader-switch-bg-light); /* Adjusted */
            transform: rotateX(0);
        }
        
        .switch__input:checked ~ .switch__lever .switch__lever-half-bottom:before {
            background-color: hsl(var(--preloader-hue2),90%,45%);  /* RED LED */
            box-shadow:
                0 0.125em 0 hsl(var(--preloader-hue2),90%,20%) inset,
                0 -0.0625em 0 var(--preloader-switch-bg-light) inset, /* Adjusted */
                0 0 0.5em hsla(var(--preloader-hue2),90%,45%,1);    /* RED GLOW */
        }
        
        .switch__input:checked ~ .switch__lever-shadow:before {
            transform: rotate(-10deg);
        }
        
        .switch__input:checked ~ .switch__lever-shadow:after {
            transform: skewX(0) scaleY(0.85);
        }

        /* Main Content Transition */
        /* This is the wrapper for the *real* site */
        .main-content {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform: scale(0.95); /* Start slightly smaller */
            transition: all 1.2s cubic-bezier(0.23, 1, 0.32, 1);
            pointer-events: none;
            overflow-y: auto; /* Allow scrolling */
            -webkit-overflow-scrolling: touch;
            /* Ensure main content's base is black, matching the preloader bg */
            background: #000; 
        }

        .main-content.visible {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }
    </style>

    <!-- 
    =================================
    PRELOADER HTML
    =================================
    This is the HTML from switch-preloader-prototype.html
    -->
     <div class="preloader-screen" id="preloaderScreen">
        
        <div class="preloader-header">
            <img src="assets/footer/sf-logo-w.webp" alt="Nairoreel Productions Logo" class="preloader-logo-img">
        </div>
        
        <label class="switch">
            <input class="switch__input" type="checkbox" role="switch" id="powerSwitch">
            <span class="switch__lever-shadow"></span>
            <span class="switch__lever">
                <span class="switch__lever-sides"></span>
                <span class="switch__lever-half-top"></span>
                <span class="switch__lever-half-bottom"></span>
            </span>
            <span class="switch__label">Power</span>
        </label>
        
        <div class="power-text">Illuminate our world</div>
    </div>

    <!-- 
    =================================
    MAIN CONTENT WRAPPER
    =================================
    This div wraps your *entire* original site.
    The preloader JS targets this ID.
    -->
    <div class="main-content" id="mainContent">
    
        <!-- 
        =================================
        ORIGINAL SITE HTML
        =================================
        This is all the HTML from index(3).html
        -->
        <nav>
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="index.html">
                        <span>Nairoreel Productions</span>
                        <span>Nairoreel Productions</span>
                    </a>
                </div>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div class="nav-links">
                    <a href="our-work.html" class="nav-highlight"><span>Our Work</span><span>Our Work</span></a>
                    <a href="us.html"><span>Us</span><span>Us</span></a>
                    <a href="process.html"><span>Process</span><span>Process</span></a>
                    <a href="contact.html"><span>Contact</span><span>Contact</span></a>
                </div>
            </div>
        </nav>

        <!-- Hero Section with Video Background -->
        <header class="hero-section">
            <div class="hero-video-bg">
                <!-- Added id="heroVideo" for the script to target -->
                <video id="heroVideo" autoplay loop muted playsinline>
                    <source src="assets/home/kfc hero.mp4" type="video/mp4">
                    <!-- Add fallback sources if needed -->
                </video>
                <div class="hero-overlay"></div>
            </div>
            <div class="hero-content">
                <h1 class="hero-title">Visual storytelling for innovative brands</h1>
                <p class="hero-subtitle">Crafting captivating visuals bringing your ideas to life.</p>
                <a href="inquiry.html" class="cta-button">Start a Project</a>
            </div>
        </header>

        <div class="divider"></div>

        <!-- Featured Work Section -->
        <section id="featured-work">
            <h2>Featured Work</h2>
            <div class="featured-grid">
                <!-- Project 1 -->
                <a href="projects/nairobi fashion week.html" class="featured-item">
                    <img src="assets/projects/nfw/nfw-thumb.webp" alt="Nairobi Fashion Week">
                    <div class="featured-overlay"></div>
                    <div class="featured-info">
                        <h3 class="featured-title">Nairobi Fashion Week</h3>
                        <p class="featured-desc">Fashion Film Production</p>
                    </div>
                </a>
                
                <!-- Project 2 -->
                <a href="projects/kfc.html" class="featured-item">
                    <img src="assets/projects/kfc/KFC-thumb.webp" alt="KFC">
                    <div class="featured-overlay"></div>
                    <div class="featured-info">
                        <h3 class="featured-title">KFC</h3>
                        <p class="featured-desc">3D Animation Campaign</p>
                    </div>
                </a>
                
                <!-- Project 3 -->
                <a href="projects/raila-tribute.html" class="featured-item">
                    <img src="assets/projects/raila/raila-thumb.webp" alt="Raila Tribute">
                    <div class="featured-overlay"></div>
                    <div class="featured-info">
                        <h3 class="featured-title">Raila Tribute</h3>
                        <p class="featured-desc">3D Motion Graphics</p>
                    </div>
                </a>
                
                <!-- Project 4 -->
                <a href="projects/reload.html" class="featured-item">
                    <img src="assets/projects/reload/reload-thumb.webp" alt="RELOAD">
                    <div class="featured-overlay"></div>
                    <div class="featured-info">
                        <h3 class="featured-title">RELOAD</h3>
                        <p class="featured-desc">Brand Visual Identity</p>
                    </div>
                </a>
                
                <!-- Project 5 - Placeholder -->
                <a href="#" class="featured-item">
                    <img src="assets/projects/placeholder1.jpg" alt="Coming Soon">
                    <div class="featured-overlay"></div>
                    <div class="featured-info">
                        <h3 class="featured-title">Coming Soon</h3>
                        <p class="featured-desc">New Project</p>
                    </div>
                </a>
                
                <!-- Project 6 - Placeholder -->
                <a href="#" class="featured-item">
                    <img src="assets/projects/placeholder2.jpg" alt="Coming Soon">
                    <div class="featured-overlay"></div>
                    <div class="featured-info">
                        <h3 class="featured-title">Coming Soon</h3>
                        <p class="featured-desc">New Project</p>
                    </div>
                </a>
            </div>
        </section>

        <div class="divider"></div>
        
        <section id="services">
            <h2>What We Do</h2>
            <div class="bento-grid">
                <a href="our-work.html#film" class="bento-item">
                    <h3 class="bento-title">Film Making</h3>
                    <p class="bento-desc">Cinematic storytelling that transforms viewers into customers.</p>
                </a>
                <a href="our-work.html#3d" class="bento-item">
                    <h3 class="bento-title">3D Animation</h3>
                    <p class="bento-desc">Dynamic visuals that bring ideas to life.</p>
                </a>
                <a href="our-work.html#photography" class="bento-item">
                    <h3 class="bento-title">Photography</h3>
                    <p class="bento-desc">Stunning images that capture your brand essence.</p>
                </a>
            </div>

            <div class="divider"></div>
        
    <div class="pricing-info">
        <h1><strong>Let's talk pricing:</strong></h1> 
        <p class="pricing-text">Custom quotes based on project scope â€” reach out for a tailored proposal at <a href="mailto:nairoreelproductions@gmail.com">nairoreelproductions@gmail.com</a> or you could fill out the inquiry form below.</p>
        <a href="../inquiry.html" class="cta-button">Inquire</a>
    </div>

        </section>

    <div class="divider"></div>

        <footer>
            <div class="footer-grid">
                <div class="footer-col">
                    <img src="assets/footer/sf-logo-w.webp" alt="Nairoreel Productions Logo" class="footer-logo">
                </div>
                <div class="footer-col">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="our-work.html#film">Film Making</a></li>
                        <li><a href="our-work.html#3d">3D Animation</a></li>
                        <li><a href="our-work.html#photography">Photography</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Pages</h3>
                    <ul>
                        <li><a href="our-work.html">Our Work</a></li>
                        <li><a href="us.html">Us</a></li>
                        <li><a href="process.html">Process</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Connect</h3>
                    <ul class="social-icons">
                        <li><a href="mailto:nairoreelproductions@gmail.com" aria-label="Email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20" fill="currentColor"><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg></a></li>
                        <li><a href="https://instagram.com/nairoreel.productions" target="_blank" aria-label="Instagram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="20" height="20" fill="currentColor"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></a></li>
                        <li><a href="#" target="_blank" aria-label="Facebook"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" width="20" height="20" fill="currentColor"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/></svg></a></li>
                        <li><a href="#" target="_blank" aria-label="TikTok"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="20" height="20" fill="currentColor"><path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"/></svg></a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                Â© 2025 Nairoreel Productions. All rights reserved.
            </div>
        </footer>
        
        <!-- 
        =================================
        SITE SCRIPTS
        =================================
        -->
        
        <!-- GSAP Library -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
        
       
        -->
        <script id="main-app-script">
            function initializeMainSite() {
                // Smooth scrolling for anchor links
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function(e) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href');
                        if (targetId === '#' || !targetId.startsWith('#')) return; // Check for valid hash
                        
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            // The .main-content is the scrolling element, not the body
                            const mainContent = document.getElementById('mainContent');
                            if (mainContent) {
                                // Calculate target position relative to the scrolling container's viewport
                                const targetOffsetTop = targetElement.offsetTop;
                                mainContent.scrollTo({
                                    top: targetOffsetTop, // scroll mainContent
                                    behavior: 'smooth'
                                });
                            } else {
                                targetElement.scrollIntoView({ behavior: 'smooth' }); // fallback
                            }
                        }
                    });
                });

                // Darkening page effect when hovering on interactive elements
                const interactiveElements = document.querySelectorAll('.bento-item, .process-item, .contact-link');
                const pageOverlay = document.querySelector('.page-overlay');
                
                if (pageOverlay) { // Safety check
                    interactiveElements.forEach(element => {
                        element.addEventListener('mouseenter', function() {
                            pageOverlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
                        });
                        element.addEventListener('mouseleave', function() {
                            pageOverlay.style.backgroundColor = 'rgba(0,0,0,0)';
                        });
                    });
                } else {
                    console.warn("'.page-overlay' not found. Darkening hover effect is disabled.");
                }
                
                // Scrolling text
                const scrollingTexts = document.querySelectorAll('.scrolling-text');
                if (scrollingTexts.length > 0) { // Safety check
                    scrollingTexts.forEach(textElement => {
                        const originalContent = textElement.textContent;
                        textElement.textContent = originalContent + ' ' + originalContent;
                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                textElement.style.animationPlayState = entry.isIntersecting ? 'running' : 'paused';
                            });
                        });
                        observer.observe(textElement);
                    });
                }

                // Active state for navigation based on current page
                const currentLocation = window.location.pathname;
                const navLinks = document.querySelectorAll('.nav-links a');
                navLinks.forEach(link => {
                    const linkPath = link.getAttribute('href');
                    if (linkPath && currentLocation.includes(linkPath) && linkPath !== '#') {
                        link.classList.add('active');
                    }
                });

                // -----------------------------
                // ðŸŸ£ Mobile Navigation Menu Logic
                // -----------------------------
                const hamburger = document.querySelector('.hamburger');
                const navLinksContainer = document.querySelector('.nav-links'); // Use a different name

                if (!hamburger || !navLinksContainer) {
                    console.warn("Hamburger menu elements (.hamburger or .nav-links) not found.");
                    return; // safety check
                }

                hamburger.addEventListener('click', () => {
                    navLinksContainer.classList.toggle('active');
                    hamburger.classList.toggle('active');
                    document.body.classList.toggle('menu-open');

                    // Apply staggered animation when opening
                    if (navLinksContainer.classList.contains('active')) {
                        const links = navLinksContainer.querySelectorAll('a');
                        links.forEach((link, index) => {
                            link.style.animation = `fadeIn 0.4s ease forwards ${index * 0.07}s`;
                        });
                    } else {
                        const links = navLinksContainer.querySelectorAll('a');
                        links.forEach(link => link.style.animation = '');
                    }
                });

                // ALSO: Add 'close menu on link click' logic, it's essential for UX
                navLinksContainer.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        // Only close if the menu is actually open
                        if (hamburger.classList.contains('active')) {
                            hamburger.classList.remove('active');
                            navLinksContainer.classList.remove('active');
                            document.body.classList.remove('menu-open');
                        }
                    });
                });
            }
        </script>

    </div> <!-- End of .main-content wrapper -->

    <!-- 
    =================================
    PRELOADER SCRIPT (MODIFIED)
    =================================
    This script now calls initializeMainSite() when the content is visible.
    -->
    <script id="preloader-script">
        const powerSwitch = document.getElementById('powerSwitch');
        const preloaderScreen = document.getElementById('preloaderScreen');
        const mainContent = document.getElementById('mainContent');

        // Simulate asset loading
        let assetsReady = false;
        setTimeout(() => {
            assetsReady = true;
        }, 2000); // 2 seconds to load assets

        // Handle switch activation
        powerSwitch.addEventListener('change', function() {
            if (this.checked) {
                // Small delay to let the switch animation complete
                setTimeout(() => {
                    // Check if assets are ready
                    if (assetsReady) {
                        transitionToMain();
                    } else {
                        // Wait for assets if not ready
                        const checkInterval = setInterval(() => {
                            if (assetsReady) {
                                clearInterval(checkInterval);
                                transitionToMain();
                            }
                        }, 100);
                    }
                }, 600); // Let switch animation play
            }
        });

        function transitionToMain() {
            // Fade out preloader
            preloaderScreen.classList.add('hidden');
            
            // Show main content after a pause
            setTimeout(() => {
                mainContent.classList.add('visible');
                
                // *** THIS IS THE FIX ***
                // Initialize all the site's JS *after* it becomes visible
                if (typeof initializeMainSite === 'function') {
                    initializeMainSite(); 
                } else {
                    console.error("initializeMainSite function not found. Main site JS will not run.");
                }
                
            }, 1200); 
            
            // Remove preloader from DOM after transition
            setTimeout(() => {
                preloaderScreen.style.display = 'none';
            }, 2400); 
        }
    </script>
</body>
</html>
